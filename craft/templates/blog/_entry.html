{#
 # News entry template
 # -------------------
 #
 # This template gets loaded whenever a News entry’s URL is
 # requested. That’s because the News section’s Template setting is
 # set to “news/_entry”, the path to this template.
 #
 # When this template is loaded, it will already have an ‘entry’
 # variable, set to the requested News entry.
 #
 # See this page for more details on how Craft routes requests:
 # http://craftcms.com/docs/routing
 #}

{% extends 'layouts/_regular' %}
{% set heroTitle %}
	{% for entry in craft.entries.section('blogOverview') %}{{ entry.title }}{% endfor %}
{% endset %}
{% set summary = null %}
{% for block in entry.lead %}
	{% switch block.type %}

		{% case "lead" %}
			{% set summary = block.text|striptags|slice(0,60) %}

		{% default %}

	{% endswitch %}
{% endfor %}
{% set criteria = {section: 'blog', order: 'postDate'} %}
{% set next = entry.getNext(criteria) %}
{% set prev = entry.getPrev(criteria) %}

{% block content %}
	{% include 'partials/hero.html' %}
	{% include 'partials/lead-section.html' %}
	<section class="page-secondary">

		{% for block in entry.body %}
			{% switch block.type %}

				{% case "header" %}
					<div class="row align-center">
						<div class="small-12 medium-8 column" itemprop="text">
							<h4>{{ block.header }}</h4>
						</div>
					</div>

				{% case "text" %}
					<div class="row align-center">
						<div class="small-12 medium-8 column" itemprop="text">
							{{ block.text }}
						</div>
					</div>

				{% case "pullquote" %}
					<div class="row align-center">
						<div class="small-12 medium-8 column" itemprop="text">
							<blockquote>{{ block.quote|striptags('<strong><em><br>')|raw|nl2br }}{% if block.citation|length %}<cite>{{ block.citation }}</cite>{% endif %}</blockquote>
						</div>
					</div>

				{% case "button" %}
					<div class="row align-center">
						<div class="small-12 medium-8 column" itemprop="text">
							{{ block.buttonLink }}
						</div>
					</div>

				{% case "videoEmbed" %}
					<div class="row column">
						<div class="responsive-embed widescreen">{{ block.videoEmbed|raw }}</div>
					</div>

				{% case "callout" %}
					<div class="row align-center">
						<div class="small-12 medium-8 column" itemprop="text">
							<div class="callout">
								<h3>{{ block.header }}</h3>
								{{ block.text }}
							</div>
						</div>
					</div>


				{% case "image" %}
					<div class="row align-left">
						<div class="small-12 medium-10 column">
							{% for asset in block.image %}
							{% set dominantColor = craft.imager.getDominantColor(asset) %}
								<figure class="image-colour" style="background-color: {{ dominantColor }}">
									<img src="{{ asset.getUrl('entryImageBodyInsert') }}" width="{{ asset.getWidth('entryImageBodyInsert') }}" height="{{ asset.getHeight('entryImageBodyInsert') }}" alt="{{ asset.title }}" class="lazyload">
								</figure>
							{% endfor %}
						</div>
					</div>

				{% default %}

			{% endswitch %}
		{% endfor %}

		{# for social sharing #}
		<div class="row align-center">
			<div class="small-12 medium-8 column">
				{% include 'partials/social.html' %}
			</div>
		</div>
		{# next and previous posts #}
		{% include 'partials/next-and-previous-posts.html' %}
	</section>
{% endblock %}